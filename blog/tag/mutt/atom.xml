<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="text">JNRowe - Posts tagged mutt</title>
  <id>https://jnrowe.github.io/blog/tag/mutt/atom.xml</id>
  <updated>2009-10-08T00:00:00Z</updated>
  <link href="https://jnrowe.github.io/" />
  <link href="https://jnrowe.github.io/blog/tag/mutt/atom.xml" rel="self" />
  <subtitle type="text">Ramblings of a tired mind</subtitle>
  <generator uri="http://ablog.readthedocs.org" version="0.9.2">ABlog</generator>
  <entry xml:base="https://jnrowe.github.io/blog/tag/mutt/atom.xml">
    <title type="text">Importing gmail filters in mutt</title>
    <id>https://jnrowe.github.io/articles/tips/Importing_gmail_filters_in_mutt.html</id>
    <updated>2009-10-08T00:00:00Z</updated>
    <published>2009-10-08T00:00:00Z</published>
    <link href="https://jnrowe.github.io/articles/tips/Importing_gmail_filters_in_mutt.html" />
    <author>
      <name></name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;importing-gmail-filters-in-mutt&quot;&gt;

&lt;p&gt;On our company’s Linux list Ryan Abbott is preparing to move to &lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/&quot;&gt;mutt&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div&gt;&lt;p&gt;I have some user filters setup in &lt;a class=&quot;reference external&quot; href=&quot;https://mail.google.com&quot;&gt;gmail&lt;/a&gt;, and I’m wondering if there some
way to make mutt use them?&lt;/p&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;Ryan has some filters set up for “premium” users who should be tagged in
a special way in the mail display so that they are much more noticeable.  Google
do support &lt;a class=&quot;reference external&quot; href=&quot;http://gmailblog.blogspot.com/2009/03/new-in-labs-filter-importexport.html&quot;&gt;exporting filters&lt;/a&gt; now, and conveniently it is in well documented
format based on &lt;a class=&quot;reference external&quot; href=&quot;http://www.atomenabled.org/&quot;&gt;Atom&lt;/a&gt;.  An example export, gleaned from Ryan but with personal
data removed, follows:&lt;/p&gt;
&lt;div class=&quot;highlight-xml notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&amp;#39;1.0&amp;#39; encoding=&amp;#39;UTF-8&amp;#39;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;feed&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;http://www.w3.org/2005/Atom&amp;#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:apps=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;http://schemas.google.com/apps/2006&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Priority filter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;tag:mail.google.com,2008:filters:1255006471524,31130756565258&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;updated&amp;gt;&lt;/span&gt;2009-10-02T12:04:00Z&lt;span class=&quot;nt&quot;&gt;&amp;lt;/updated&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;author&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Ryan Abbott&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;email&amp;gt;&lt;/span&gt;rabbott@example.com&lt;span class=&quot;nt&quot;&gt;&amp;lt;/email&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;uri&amp;gt;&lt;/span&gt;http://rabbott.example.com&lt;span class=&quot;nt&quot;&gt;&amp;lt;/uri&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/author&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;entry&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;category&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;term=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;filter&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/category&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Joe Bloggs&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;tag:mail.google.com,2008:filter:1255006471524&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;updated&amp;gt;&lt;/span&gt;2009-10-01T09:23:11Z&lt;span class=&quot;nt&quot;&gt;&amp;lt;/updated&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;content&amp;gt;&amp;lt;/content&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;apps:property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;from&amp;#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;joe@example.com&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;apps:property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;label&amp;#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;HiPri&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/entry&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;entry&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;category&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;term=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;filter&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/category&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;John Doe&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;tag:mail.google.com,2008:filter:31130756565258&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;updated&amp;gt;&lt;/span&gt;2009-09-23T14:59:45Z&lt;span class=&quot;nt&quot;&gt;&amp;lt;/updated&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;content&amp;gt;&amp;lt;/content&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;apps:property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;from&amp;#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;johndoe@example.com&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;apps:property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;label&amp;#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;HiPri&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/entry&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/feed&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The exported filter is actually quite nice and we could just pull the email
addresses out with &lt;a class=&quot;reference external&quot; href=&quot;http://sed.sourceforge.net/&quot;&gt;sed&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-console notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;$&lt;/span&gt; sed -n &lt;span class=&quot;s2&quot;&gt;&amp;quot;/name=&amp;#39;from&amp;#39;/s,^.*value=&amp;#39;\([^&amp;#39;]\+\)&amp;#39;.*&lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;,\1,p&amp;quot;&lt;/span&gt; filter.xml
&lt;span class=&quot;go&quot;&gt;joe@example.com&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;johndoe@example.com&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;admonition warning&quot;&gt;
&lt;p class=&quot;admonition-title&quot;&gt;Warning&lt;/p&gt;
&lt;p&gt;You shouldn’t parse &lt;abbr title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/abbr&gt; with tools like &lt;strong class=&quot;command&quot;&gt;sed&lt;/strong&gt; or &lt;strong class=&quot;command&quot;&gt;awk&lt;/strong&gt;.
There are plenty of &lt;abbr title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/abbr&gt; processing tools available, and unlike
&lt;strong class=&quot;command&quot;&gt;sed&lt;/strong&gt; they shouldn’t fail with files that contain namespaces or
other &lt;abbr title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/abbr&gt; features.  Now I’ve said that, carry on using &lt;strong class=&quot;command&quot;&gt;sed&lt;/strong&gt;
like I often do ;)&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Once we have some way of getting at the email addresses we just need to add the
filters to &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;.  For those of us who use &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; the normal
approach to prioritising in the gmail way is to use either &lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/doc/manual/manual-3.html#ss3.7&quot;&gt;colouring&lt;/a&gt; or
&lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/doc/manual/manual-3.html#ss3.22&quot;&gt;scoring&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;color index brightgreen default ~fjoe@example.com
score ~fjohndoe@example.com +20
set index_format=&amp;quot;%Z %2N %?H?%-16.12H&amp;amp;%D? %-16.16F  %s&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;img alt=&quot;colouring and scoring in mutt&quot; src=&quot;.images/2009-10-08-mutt_screenshot.png&quot; /&gt;
&lt;p&gt;The &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;color&lt;/span&gt;&lt;/code&gt; example sets all mail from the fictitious Joe Bloggs in the mail
index to use a bright green foreground and the default background colour.  The
&lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;score&lt;/span&gt;&lt;/code&gt; example adds another 20 points to mail from John Doe, we add it
instead of setting it directly is so that we can make use cumulative scoring.
We must make sure we include &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;%N&lt;/span&gt;&lt;/code&gt; in our &lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/doc/manual/manual-6.html#index_format&quot;&gt;index_format&lt;/a&gt; setting to see the
scores in the mail index, the above &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;index_format&lt;/span&gt;&lt;/code&gt; setting is the one
I currently use and it can be seen in the screenshot above.&lt;/p&gt;
&lt;p&gt;I’m sure we’d prefer to automate the generation of the rules, and we can
quickly generate a list for &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; using our favourite &lt;abbr title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/abbr&gt;
processing tool.  Today I’m using &lt;a class=&quot;reference external&quot; href=&quot;http://www.ruby-lang.org/&quot;&gt;ruby&lt;/a&gt;, because I know it is installed on
Ryan’s system.  We’re going to keep the identifier data from the Google export
just in case we decide to export our rules from &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; at some point
in the future:&lt;/p&gt;
&lt;div class=&quot;highlight-ruby notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rexml/document&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;doc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;REXML&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;feed/entry&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;addy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;apps:property&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;# &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;score ~f&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addy&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 20&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Calling that script on the example data from above yields a small
&lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; configuration file that we can include in our mutt setup by
adding &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;&amp;lt;file_location&amp;gt;&lt;/span&gt;&lt;/code&gt; to our &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~/.muttrc&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Joe Bloggs, tag:mail.google.com,2008:filter:1255006471524
score ~fjoe@example.com -20
# John Doe, tag:mail.google.com,2008:filter:31130756565258
score ~fjohndoe@example.com -20
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A few years ago I posted some of tricks and tips I use for &lt;a class=&quot;reference external&quot; href=&quot;http://www.jnrowe.ukfsn.org/articles/configs/mutt.html&quot;&gt;configuring mutt&lt;/a&gt;,
which include some neat ways to colour and score mail on a per-folder basis.  It
may be worth taking a quick look at if you use folders to organise your mails.&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="https://jnrowe.github.io/blog/tag/mutt/atom.xml">
    <title type="text">Theming mutt</title>
    <id>https://jnrowe.github.io/articles/tips/Theming_mutt.html</id>
    <updated>2009-09-23T00:00:00Z</updated>
    <published>2009-09-23T00:00:00Z</published>
    <link href="https://jnrowe.github.io/articles/tips/Theming_mutt.html" />
    <author>
      <name></name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;theming-mutt&quot;&gt;

&lt;p&gt;Jeff, a work colleague, asks via &lt;abbr title=&quot;Internet Relay Chat&quot;&gt;IRC&lt;/abbr&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div&gt;&lt;p&gt;Can I make &lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/&quot;&gt;mutt&lt;/a&gt; use a blue statusbar in X and red in console? A different
colour would make it easier to read with a transparent urxvt.&lt;/p&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/&quot;&gt;mutt&lt;/a&gt; has access to environment variables when reading its configurations files,
so setting the theme based on term type is extremely easy.&lt;/p&gt;
&lt;p&gt;First separate all your common settings in to one file, say
&lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~/.mutt/colour_defaults.rc&lt;/span&gt;&lt;/code&gt;.  Then add your per-term settings to a file
named &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~/.mutt/colour_$TERM.rc&lt;/span&gt;&lt;/code&gt;.  Telling mutt to use the correct theme is
now as simple as adding the following to your &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~/.muttrc&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-sh notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.mutt/colour_defaults.rc
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.mutt/colour_&lt;span class=&quot;nv&quot;&gt;$TERM&lt;/span&gt;.rc
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="https://jnrowe.github.io/blog/tag/mutt/atom.xml">
    <title type="text">mutt configuration snippets</title>
    <id>https://jnrowe.github.io/articles/mutt_config_snippets.html</id>
    <updated>2007-03-05T00:00:00Z</updated>
    <published>2007-03-05T00:00:00Z</published>
    <link href="https://jnrowe.github.io/articles/mutt_config_snippets.html" />
    <author>
      <name></name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;mutt-configuration-snippets&quot;&gt;

&lt;p&gt;&lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/&quot;&gt;mutt&lt;/a&gt; is my favourite &lt;abbr title=&quot;Mail User Agent&quot;&gt;MUA&lt;/abbr&gt;, one of the few tools
I truly believe I couldn’t manage without.  It is also one of those tools,
along with &lt;a class=&quot;reference external&quot; href=&quot;http://www.vim.org/&quot;&gt;vim&lt;/a&gt;, which can end up sucking away all your free time to configure
it just how you want.&lt;/p&gt;
&lt;p&gt;To get a quick idea of how many options you can configure with &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;
run &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;mutt&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;-D&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;wc&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;-l&lt;/span&gt;&lt;/code&gt;, on my system with a heavily patched &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;
1.5.13 it dumps just over 300 lines of output.  Of course, you shouldn’t need
to edit all of those settings though.&lt;/p&gt;
&lt;p&gt;With the possibility of such large configuration files segregation is
important, and to aid that &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; supports config file inclusion.  My
own &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~/.muttrc&lt;/span&gt;&lt;/code&gt; takes advantage of this and consists of just the
following:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;source ~/.mutt/boolean.rc
source ~/.mutt/colour.rc
source ~/.mutt/format.rc
source ~/.mutt/keys.rc
source ~/.mutt/misc.rc
source ~/.mutt/quad.rc
source ~/.mutt/folders.rc
source ~/.mutt/autoview.rc
source ~/.mutt/gpg.rc
source ~/.mutt/score.rc

push &amp;lt;show-version&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The main config file simply includes all my other config files, and finally
displays the &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; version number in the status line.  If you go down
this route, and I recommend it, just keep in mind that &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;
processes the files in order so you can’t use variables that are defined in
later files.  The other thing to bear in mind while debugging is that
&lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; will be using the &lt;em&gt;last&lt;/em&gt; set option, so if you try to set the
same variable in &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;boolean.rc&lt;/span&gt;&lt;/code&gt; and &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;gpg.rc&lt;/span&gt;&lt;/code&gt; &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; will
override the value from &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;boolean.rc&lt;/span&gt;&lt;/code&gt; when it reads &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;gpg.rc&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The first config file to contain anything unusual is &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;colour.rc&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Match URLs in mail
color body blue default &amp;quot;(finger|ftp|hg|http(|s)|news|tel)://[^ ]*&amp;quot;
color body yellow black &amp;quot;mailto:[-a-z_0-9.]+@[-a-z_0-9.]+&amp;quot;
# Match dates, both ISO-style and [YY]YY/MM/DD
color body brightred black &amp;quot;\(19|20\)?[0-9][0-9][/-][01]?[0-9][/-][0123]?[0-9]&amp;quot;

# Highlight qsf and SpamAssassin flagged mail
color index brightred brightblack &amp;quot;~h &amp;#39;^X-Spam: YES&amp;#39;&amp;quot;
color index brightmagenta brightblack &amp;quot;~h &amp;#39;^X-Spam-Status: Yes&amp;#39;&amp;quot;

# ISBNs
color body yellow default &amp;quot;[-0-9]{9,12}[0-9X]&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;keys.rc&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Read mail using text-to-speech engine
macro pager + &amp;quot;|festival --tts\r&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;misc.rc&lt;/span&gt;&lt;/code&gt; you can find:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Fetch the spam rating as defined by qsf and SpamAssassin
spam &amp;quot;X-Spam-Status: Yes, hits=([0-9]+.[0-9]*)&amp;quot; &amp;quot;Spam [%1]&amp;quot;
spam &amp;quot;X-Spam-Rating: ([7-9][0-9]+)&amp;quot; &amp;quot;Spam [%1]&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You can then display the ratings in the &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; index by using &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;%H&lt;/span&gt;&lt;/code&gt;
in your &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;index_format&lt;/span&gt;&lt;/code&gt; string.  I personally choose to display the spam
rating instead of the date if it is found:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;set index_format=&amp;quot;%Z %2N %?H?%-12.12H&amp;amp;%D? %-16.16F  %s&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The important bit there is &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;%?H?%-12.12H&amp;amp;%D?&lt;/span&gt;&lt;/code&gt; which displays twelve
characters of the spam value if it is found, or failing that the date.  The
reason we display exactly 12 characters of the spam value is so that the
columns line up correctly regardless of whether we display a date or a spam
value.  An example can be seen on the right featuring a few snippets from a ham
mailbox and my spam mailbox:&lt;/p&gt;
&lt;div class=&quot;figure&quot;&gt;
&lt;img alt=&quot;Spam field alignment in :command:`mutt`&quot; src=&quot;.images/mutt_spam.png&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;The final, and perhaps most interesting, file is &lt;code class=&quot;file docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;score.rc&lt;/span&gt;&lt;/code&gt; where
I define all my manual scoring and some per-mail colouring policies.&lt;/p&gt;
&lt;p&gt;The first thing we need to understand is that &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; accumulates
scoring and colouring over its run time.  If you set a scoring policy of +20
for all mail from a certain domain each time you enter a folder 20 will be
added to the score of any mail from that domain.  If you leave &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;
running for a long time this can easily end up skewing the displayed score.
The solution is simple, we tell &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; to re-source the score file and
clear the settings every time we change folders:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Reread this file on every folder change
folder-hook . source ~/.mutt/score.rc
unscore *
uncolor index *
# Read our global colours again
source ~/.mutt/colour.rc
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now we are free to setup our scoring policies without needing to worry about
whether a score will be calculated twice.  We can also set up per-folder
colouring much easier this way.&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Score mail to me, basically any mail which matches a value in
# $alternates
score ~p 40

# Color UKFSN status mail, this way we can highlight the status
# messages in the users mailing list and we don’t need to subscribe
# to the specific status list.
folder-hook UKFSN-users color index brightred black ~hX-Status-Mail:

# Gentoo stuff
# Color resolved Bugzilla bug mail
folder-hook Gentoo-bugs color index brightred black ~hX-Resolved:
# Watch for comments from Seemant in the bugstream
folder-hook Gentoo-bugs &amp;#39;color index brightyellow default ~fseemant@gentoo\.org&amp;#39;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; allows you to search the entire message using the &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~b&lt;/span&gt;&lt;/code&gt;
qualifier, but it can take an incredible amount of time to scan a large mailbox
if you use full body searches.  If you need to search in the mail body on
a routine basis it is better to add custom headers to your mail during
processing with your &lt;abbr title=&quot;Mail Delivery Agent&quot;&gt;MDA&lt;/abbr&gt;, and then trigger rules based on those headers.&lt;/p&gt;
&lt;p&gt;The Gentoo-bugs folder examples above use this method, because unfortunately
&lt;a class=&quot;reference external&quot; href=&quot;http://www.bugzilla.org/&quot;&gt;Bugzilla&lt;/a&gt; doesn’t give us anything else to work with.  I add a &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;X-Resolved&lt;/span&gt;&lt;/code&gt;
header if the mail contains &lt;code class=&quot;regexp docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;+Status|[^|]+|RESOLVED$&lt;/span&gt;&lt;/code&gt;.  And I set
the &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;From&lt;/span&gt;&lt;/code&gt; header with the address taken from the first line that matches
&lt;code class=&quot;regexp docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;^-{7}&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;Comment&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;#&lt;/span&gt;&lt;/code&gt;, or &lt;code class=&quot;regexp docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;{8}ReportedBy:&lt;/span&gt;&lt;/code&gt;.  Those two &lt;abbr title=&quot;Regular Expression&quot;&gt;RegEx&lt;/abbr&gt;
catch every Gentoo Bugzilla mail I’ve come across, except external bug state
changes which are left unchanged on purpose for easy highlighting.  I use
a non-public &lt;abbr title=&quot;Mail Delivery Agent&quot;&gt;MDA&lt;/abbr&gt; system, so the actual rules aren’t very useful.&lt;/p&gt;
&lt;p&gt;You can use any of the search attributes &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt; defines to set up
scores or colouring.  For example, you could set all mail older than 1 week to
a dull grey by matching on &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;~d&amp;gt;1w&lt;/span&gt;&lt;/code&gt; as in:&lt;/p&gt;
&lt;div class=&quot;highlight-text notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;folder-hook Gentoo-bugs &amp;#39;color index brightblack default &amp;#39;~d&amp;gt;1w&amp;#39;&amp;#39;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There are a lot of possibilities with &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;, and there is a lot of
in-depth documentation included in the package.  If your distribution doesn’t
include it you can always head along to the &lt;a class=&quot;reference external&quot; href=&quot;http://www.mutt.org/&quot;&gt;mutt&lt;/a&gt; website and read it there.
Happy &lt;strong class=&quot;command&quot;&gt;mutt&lt;/strong&gt;’ing.&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>
</feed>
