

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sharing Xresources between systems &mdash; JNRowe</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="copyright" title="Copyright" href="../../copyright.html"/>
    <link rel="top" title="JNRowe" href="../../index.html"/>
        <link rel="up" title="Tips" href="index.html"/>
        <link rel="next" title="Simple notifications in awesome" href="Simple_notifications_in_awesome.html"/>
        <link rel="prev" title="Populating sup contacts from abook" href="Populating_sup_contacts_from_abook.html"/>
    <link rel="alternate" type="application/atom+xml" title="Updated items" href="/updates.atom" />

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> JNRowe</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects.html#forks-i-m-hacking-on">Forks I&#8217;m hacking on</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects.html#git-mirrors-of-projects-i-m-hacking-on">Git mirrors of projects I&#8217;m hacking on</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Articles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo.html">Dropping Gentoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo_reflex.html">Dropping Gentoo reflex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fossil.html"><tt class="docutils literal"><span class="pre">fossil</span></tt> experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rcs.html">Introduction to RCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tdd_distros.html">TDD distro development</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#further-categories">Further categories</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../thoughts/index.html">Thoughts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/burn_out.html">Open Source and enjoyment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/burn_out.html#the-solutions">The solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/delayed_flashover.html">Delayed flashover</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/disconnect.html">Cleanse thy soul</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/dopplr_effects.html">Dopplr defects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/important_balance.html">Murdering morality with ferocious fire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/nice_stories.html">Tell me a nice story, please</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/reset_in_ten.html">Hitting life&#8217;s reset button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/side_projects.html">Side-projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thoughts/the_returned.html">Return to rambling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../colophon.html#content-creation">Content creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../colophon.html#and-finally">And finally...</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">JNRowe</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Articles</a> &raquo;</li>
      
          <li><a href="index.html">Tips</a> &raquo;</li>
      
    <li>Sharing Xresources between systems</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/articles/tips/Sharing_Xresources_between_systems.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
    <div class="admonition note">
        <p class="first admonition-title">
            Estimated reading time: 1 minutes
        </p>
    </div>
    
    
            
  <div class="section" id="sharing-xresources-between-systems">
<h1>Sharing Xresources between systems<a class="headerlink" href="#sharing-xresources-between-systems" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2009-10-05</td>
</tr>
</tbody>
</table>
<p>In amongst the rants in our watercooler channel at work comes this question:</p>
<blockquote>
<div>So then, how do custom settings in <tt class="docutils literal"><span class="pre">Xresources</span></tt> work if you share your
home directory between machines?</div></blockquote>
<p>The question arises from a much larger topic concerning keeping your home
directory in a <a class="reference external" href="http://www.git-scm.com/">git</a> repository.  The issue Carl is having is that he needs to
use different options on different machines and doesn&#8217;t relish the idea of
having to pull and rebase branches just to keep files in sync.  Of course, he
doesn&#8217;t have to do that and that is the point of this tip.</p>
<div class="section" id="basic-conditionals">
<h2>Basic conditionals<a class="headerlink" href="#basic-conditionals" title="Permalink to this headline">¶</a></h2>
<p>With great foresight the authors of <a class="reference external" href="http://www.xfree86.org/current/xrdb.1.html">xrdb</a> decided that our <tt class="docutils literal"><span class="pre">Xresources</span></tt> file
should be preprocessed before it is used, the default preprocessor is <tt class="docutils literal"><span class="pre">cpp</span></tt>.
On most of our systems at work, and likely most Linux systems in general,
<tt class="docutils literal"><span class="pre">cpp</span></tt> is <a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc-4.4.1/cpp/">GNU cpp</a>.  Don&#8217;t worry about the size of the manual though, the
interesting features are easy to understand and use.  Let&#8217;s look at trimmed
example from my configuration file:</p>
<div class="highlight-c"><div class="highlight"><pre>#ifndef FIXED_FONT
    #define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false
#endif
#ifndef BOLD_FIXED_FONT
    #define BOLD_FIXED_FONT FIXED_FONT:bold
#endif

urxvt.font: FIXED_FONT
urxvt.boldFont: BOLD_FIXED_FONT

irssi.font: FIXED_FONT
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202712">Fork this code</a></p>
<p>This small snippet sets a couple of default fonts that we can reference
throughout our resource file as <tt class="docutils literal"><span class="pre">FIXED_FONT</span></tt> and <tt class="docutils literal"><span class="pre">BOLD_FIXED_FONT</span></tt>.  This
way we can easily change the value in one place and it trickles down to all our
programs.  Or we can define different options at runtime by specifying values to
<tt class="docutils literal"><span class="pre">xrdb</span></tt>, such as <tt class="docutils literal"><span class="pre">xrdb</span> <span class="pre">-DFIXED_FONT=xft:Monospace:pixelsize=10</span></tt>.  And don&#8217;t
worry, <tt class="docutils literal"><span class="pre">cpp</span></tt> is smart enough to cope with the use <tt class="docutils literal"><span class="pre">=</span></tt> in our definition.</p>
</div>
<div class="section" id="per-system-conditionals">
<h2>Per system conditionals<a class="headerlink" href="#per-system-conditionals" title="Permalink to this headline">¶</a></h2>
<p>On one system I use <a class="reference external" href="http://www.levien.com/type/myfonts/inconsolata.html">Inconsolata</a> is not installed, so the configuration above
wouldn&#8217;t work on it.  <tt class="docutils literal"><span class="pre">xrdb</span></tt> gives us a way around the problem though, it
defines a set of symbols we can use including one to test the system&#8217;s
<tt class="docutils literal"><span class="pre">hostname</span></tt>.  <tt class="docutils literal"><span class="pre">nebula</span></tt>, the system that doesn&#8217;t have Inconsolata, does have
<a class="reference external" href="http://www.is-vn.bg/hamster/">terminus</a> and I can use that on there with a couple of small changes.</p>
<div class="highlight-c"><div class="highlight"><pre>#ifndef FIXED_FONT
    #ifdef SRVR_nebula
        #define FIXED_FONT xft:Terminus:pixelsize=14:antialias=false
    #else
        #define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false
    #endif
#endif
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202713">Fork this code</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As we&#8217;re using <a class="reference external" href="http://xorg.freedesktop.org/">X11</a>&#8216;s <tt class="docutils literal"><span class="pre">xrdb</span></tt> it is network aware, it defines <tt class="docutils literal"><span class="pre">SVR_$name</span></tt>
for the <tt class="docutils literal"><span class="pre">X</span></tt> server name and <tt class="docutils literal"><span class="pre">CLNT_$name</span></tt> for the client name.  Using
these it is easy to configure systems where the server and clients are on
different machines.</p>
</div>
</div>
<div class="section" id="conditionals-for-server-options">
<h2>Conditionals for server options<a class="headerlink" href="#conditionals-for-server-options" title="Permalink to this headline">¶</a></h2>
<p>You can also change configured settings based on the extensions loaded in to the
server, for example to disable the screensaver in <tt class="docutils literal"><span class="pre">muxi</span></tt> if the DPMS extension
is supported we&#8217;d test for <tt class="docutils literal"><span class="pre">EXT_DPMS</span></tt>:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#ifdef EXT_DPMS</span>
    <span class="n">muxi</span><span class="p">.</span><span class="n">screensaver</span><span class="o">:</span> <span class="nb">false</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202714">Fork this code</a></p>
</div>
<div class="section" id="testing-your-resource-files">
<h2>Testing your resource files<a class="headerlink" href="#testing-your-resource-files" title="Permalink to this headline">¶</a></h2>
<p>When you&#8217;re testing your own <tt class="docutils literal"><span class="pre">~/.Xresources</span></tt> file you can use the <tt class="docutils literal"><span class="pre">-n</span></tt>
option with <tt class="docutils literal"><span class="pre">xrdb</span></tt>, it tells <tt class="docutils literal"><span class="pre">xrdb</span></tt> to dump the settings as they would be
used instead of updating the resource database.  This makes it easy to check if
our conditional statements are working correctly without having to open and
close applications constantly.  You can also define and cancel symbol
definitions with the <tt class="docutils literal"><span class="pre">-D</span></tt> and <tt class="docutils literal"><span class="pre">-U</span></tt> options for <tt class="docutils literal"><span class="pre">xrdb</span></tt>, this allows you to
test your modifications that rely on symbols that are normally exported by
<tt class="docutils literal"><span class="pre">xrdb</span></tt>.</p>
</div>
<div class="section" id="using-a-more-featureful-preprocessor">
<h2>Using a more featureful preprocessor<a class="headerlink" href="#using-a-more-featureful-preprocessor" title="Permalink to this headline">¶</a></h2>
<p>You can also choose a different preprocessor if <tt class="docutils literal"><span class="pre">cpp</span></tt> isn&#8217;t up to your needs
by specifying a <tt class="docutils literal"><span class="pre">-cpp</span></tt> option to <tt class="docutils literal"><span class="pre">xrdb</span></tt>.  The only caveat is that must
accept <tt class="docutils literal"><span class="pre">-D</span></tt> for defines, <tt class="docutils literal"><span class="pre">-U</span></tt> for symbol cancelling and <tt class="docutils literal"><span class="pre">-I</span></tt> for include
paths.  An example that does fit these restrictions is <a class="reference external" href="http://www.gnu.org/software/m4/m4.html">m4</a>, and it might be
a good choice if you wish to do mode advanced things in your configuration file
such as fancy filtering or the use of loops for defining settings.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Simple_notifications_in_awesome.html" class="btn btn-neutral float-right" title="Simple notifications in awesome"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Populating_sup_contacts_from_abook.html" class="btn btn-neutral" title="Populating sup contacts from abook"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../../copyright.html">Copyright</a> 2009-2014, James Rowe.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>