

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sharing Xresources between systems &mdash; JNRowe</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
        <link rel="copyright" title="Copyright" href="../../copyright.html"/>
    <link rel="top" title="JNRowe" href="../../index.html"/>
        <link rel="up" title="Tips" href="index.html"/>
        <link rel="next" title="Simple notifications in awesome" href="Simple_notifications_in_awesome.html"/>
        <link rel="prev" title="Populating sup contacts from abook" href="Populating_sup_contacts_from_abook.html"/>
    <link rel="alternate" type="application/atom+xml" title="Updated items" href="/updates.atom" />

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> JNRowe
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Articles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo.html">Dropping Gentoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo_reflex.html">Dropping Gentoo reflex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fossil.html"><code class="docutils literal"><span class="pre">fossil</span></code> experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rcs.html">Introduction to RCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tdd_distros.html">TDD distro development</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#further-categories">Further categories</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Tips</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="BTS_as_a_task_manager.html"><abbr title="Bug Tracking System">BTS</abbr> as a task manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="Beyond_tab_completion.html">Beyond simple tab completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="Bugzilla_real_names.html">Bugzilla mail with real names</a></li>
<li class="toctree-l4"><a class="reference internal" href="Compiling_in_vim.html">Compiling C source in vim</a></li>
<li class="toctree-l4"><a class="reference internal" href="Context_aware_diffs_with_git.html">Context aware diffs with git</a></li>
<li class="toctree-l4"><a class="reference internal" href="Custom_locations_in_the_GTK_filechooser.html">Custom keybindings in the GTK+ file dialogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="Debugging_python_regexps.html">Debugging Python regular expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="Disabling_cursor_blinking_in_GTK.html">Disabling cursor blinking in GTK+</a></li>
<li class="toctree-l4"><a class="reference internal" href="Fancy_awesome_theming.html">Fancy awesome theming</a></li>
<li class="toctree-l4"><a class="reference internal" href="Finding_a_windows_owner.html">Finding a window’s owner</a></li>
<li class="toctree-l4"><a class="reference internal" href="Formatting_csv_files_in_the_shell.html">Formatting <abbr title="Comma Separated Values">CSV</abbr> files in the shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="Gentoo_one_liners.html">Gentoo one liners</a></li>
<li class="toctree-l4"><a class="reference internal" href="Importing_gmail_filters_in_mutt.html">Importing gmail filters in mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="Instant_web_server.html">Instant web server</a></li>
<li class="toctree-l4"><a class="reference internal" href="Kick_me_birthday_reminders.html">‘Kick me’ birthday reminders</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html">Making a nice home</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#permissions">Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#vim-hacks">vim hacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#documentation">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Populating_sup_contacts_from_abook.html">Populating sup contacts from abook</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Sharing Xresources between systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="Simple_notifications_in_awesome.html">Simple notifications in awesome</a></li>
<li class="toctree-l4"><a class="reference internal" href="Simple_notifications_in_awesome.html#window-creation-notifications">Window creation notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="Simple_notifications_in_awesome.html#network-notifications">Network notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="Theming_mutt.html">Theming mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="Three_mobile_broadband_in_linux.html">Three mobile broadband in Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="Toggling_settings_in_vim.html">Toggling settings in vim</a></li>
<li class="toctree-l4"><a class="reference internal" href="Uber_pink_prompts.html">Uber pink prompts</a></li>
<li class="toctree-l4"><a class="reference internal" href="Visual_vim_mode_identifier.html">Visual vim mode identifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="Zsh_and_the_vcs.html">Zsh and the VCS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../probits/index.html">Project postmortems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../thoughts/index.html">Thoughts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">JNRowe</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Articles</a> &raquo;</li>
      
          <li><a href="index.html">Tips</a> &raquo;</li>
      
    <li>Sharing Xresources between systems</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sharing-xresources-between-systems">
<h1>Sharing Xresources between systems<a class="headerlink" href="#sharing-xresources-between-systems" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2009-10-05</td>
</tr>
</tbody>
</table>
<p>In amongst the rants in our watercooler channel at work comes this question:</p>
<blockquote>
<div>So then, how do custom settings in <code class="docutils literal"><span class="pre">Xresources</span></code> work if you share your
home directory between machines?</div></blockquote>
<p>The question arises from a much larger topic concerning keeping your home
directory in a <a class="reference external" href="http://www.git-scm.com/">git</a> repository.  The issue Carl is having is that he needs to
use different options on different machines and doesn’t relish the idea of
having to pull and rebase branches just to keep files in sync.  Of course, he
doesn’t have to do that and that is the point of this tip.</p>
<div class="section" id="basic-conditionals">
<h2>Basic conditionals<a class="headerlink" href="#basic-conditionals" title="Permalink to this headline">¶</a></h2>
<p>With great foresight the authors of <a class="reference external" href="http://www.xfree86.org/current/xrdb.1.html">xrdb</a> decided that our <code class="docutils literal"><span class="pre">Xresources</span></code> file
should be preprocessed before it is used, the default preprocessor is <code class="docutils literal"><span class="pre">cpp</span></code>.
On most of our systems at work, and likely most Linux systems in general,
<code class="docutils literal"><span class="pre">cpp</span></code> is <a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc-4.4.1/cpp/">GNU cpp</a>.  Don’t worry about the size of the manual though, the
interesting features are easy to understand and use.  Let’s look at trimmed
example from my configuration file:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#ifndef FIXED_FONT</span>
    <span class="cp">#define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef BOLD_FIXED_FONT</span>
    <span class="cp">#define BOLD_FIXED_FONT FIXED_FONT:bold</span>
<span class="cp">#endif</span>

<span class="n">urxvt</span><span class="p">.</span><span class="nl">font</span><span class="p">:</span> <span class="n">FIXED_FONT</span>
<span class="n">urxvt</span><span class="p">.</span><span class="nl">boldFont</span><span class="p">:</span> <span class="n">BOLD_FIXED_FONT</span>

<span class="n">irssi</span><span class="p">.</span><span class="nl">font</span><span class="p">:</span> <span class="n">FIXED_FONT</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202712">Fork this code</a></p>
<p>This small snippet sets a couple of default fonts that we can reference
throughout our resource file as <code class="docutils literal"><span class="pre">FIXED_FONT</span></code> and <code class="docutils literal"><span class="pre">BOLD_FIXED_FONT</span></code>.  This
way we can easily change the value in one place and it trickles down to all our
programs.  Or we can define different options at runtime by specifying values to
<code class="docutils literal"><span class="pre">xrdb</span></code>, such as <code class="docutils literal"><span class="pre">xrdb</span> <span class="pre">-DFIXED_FONT=xft:Monospace:pixelsize=10</span></code>.  And don’t
worry, <code class="docutils literal"><span class="pre">cpp</span></code> is smart enough to cope with the use <code class="docutils literal"><span class="pre">=</span></code> in our definition.</p>
</div>
<div class="section" id="per-system-conditionals">
<h2>Per system conditionals<a class="headerlink" href="#per-system-conditionals" title="Permalink to this headline">¶</a></h2>
<p>On one system I use <a class="reference external" href="http://www.levien.com/type/myfonts/inconsolata.html">Inconsolata</a> is not installed, so the configuration above
wouldn’t work on it.  <code class="docutils literal"><span class="pre">xrdb</span></code> gives us a way around the problem though, it
defines a set of symbols we can use including one to test the system’s
<code class="docutils literal"><span class="pre">hostname</span></code>.  <code class="docutils literal"><span class="pre">nebula</span></code>, the system that doesn’t have Inconsolata, does have
<a class="reference external" href="http://www.is-vn.bg/hamster/">terminus</a> and I can use that on there with a couple of small changes.</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#ifndef FIXED_FONT</span>
    <span class="cp">#ifdef SRVR_nebula</span>
        <span class="cp">#define FIXED_FONT xft:Terminus:pixelsize=14:antialias=false</span>
    <span class="cp">#else</span>
        <span class="cp">#define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false</span>
    <span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202713">Fork this code</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As we’re using <a class="reference external" href="http://xorg.freedesktop.org/">X11</a>’s <code class="docutils literal"><span class="pre">xrdb</span></code> it is network aware, it defines <code class="docutils literal"><span class="pre">SVR_$name</span></code>
for the <code class="docutils literal"><span class="pre">X</span></code> server name and <code class="docutils literal"><span class="pre">CLNT_$name</span></code> for the client name.  Using
these it is easy to configure systems where the server and clients are on
different machines.</p>
</div>
</div>
<div class="section" id="conditionals-for-server-options">
<h2>Conditionals for server options<a class="headerlink" href="#conditionals-for-server-options" title="Permalink to this headline">¶</a></h2>
<p>You can also change configured settings based on the extensions loaded in to the
server, for example to disable the screensaver in <code class="docutils literal"><span class="pre">muxi</span></code> if the DPMS extension
is supported we’d test for <code class="docutils literal"><span class="pre">EXT_DPMS</span></code>:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#ifdef EXT_DPMS</span>
    <span class="n">muxi</span><span class="p">.</span><span class="nl">screensaver</span><span class="p">:</span> <span class="nb">false</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202714">Fork this code</a></p>
</div>
<div class="section" id="testing-your-resource-files">
<h2>Testing your resource files<a class="headerlink" href="#testing-your-resource-files" title="Permalink to this headline">¶</a></h2>
<p>When you’re testing your own <code class="docutils literal"><span class="pre">~/.Xresources</span></code> file you can use the <code class="docutils literal"><span class="pre">-n</span></code>
option with <code class="docutils literal"><span class="pre">xrdb</span></code>, it tells <code class="docutils literal"><span class="pre">xrdb</span></code> to dump the settings as they would be
used instead of updating the resource database.  This makes it easy to check if
our conditional statements are working correctly without having to open and
close applications constantly.  You can also define and cancel symbol
definitions with the <code class="docutils literal"><span class="pre">-D</span></code> and <code class="docutils literal"><span class="pre">-U</span></code> options for <code class="docutils literal"><span class="pre">xrdb</span></code>, this allows you to
test your modifications that rely on symbols that are normally exported by
<code class="docutils literal"><span class="pre">xrdb</span></code>.</p>
</div>
<div class="section" id="using-a-more-featureful-preprocessor">
<h2>Using a more featureful preprocessor<a class="headerlink" href="#using-a-more-featureful-preprocessor" title="Permalink to this headline">¶</a></h2>
<p>You can also choose a different preprocessor if <code class="docutils literal"><span class="pre">cpp</span></code> isn’t up to your needs
by specifying a <code class="docutils literal"><span class="pre">-cpp</span></code> option to <code class="docutils literal"><span class="pre">xrdb</span></code>.  The only caveat is that must
accept <code class="docutils literal"><span class="pre">-D</span></code> for defines, <code class="docutils literal"><span class="pre">-U</span></code> for symbol cancelling and <code class="docutils literal"><span class="pre">-I</span></code> for include
paths.  An example that does fit these restrictions is <a class="reference external" href="http://www.gnu.org/software/m4/m4.html">m4</a>, and it might be
a good choice if you wish to do mode advanced things in your configuration file
such as fancy filtering or the use of loops for defining settings.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Simple_notifications_in_awesome.html" class="btn btn-neutral float-right" title="Simple notifications in awesome" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Populating_sup_contacts_from_abook.html" class="btn btn-neutral" title="Populating sup contacts from abook" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../../copyright.html">Copyright</a> 2009-2017, James Rowe.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>