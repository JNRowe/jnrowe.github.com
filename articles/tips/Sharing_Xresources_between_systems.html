

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sharing Xresources between systems &mdash; JNRowe</title>
    
    <link rel="stylesheet" href="../../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="JNRowe" href="../../index.html" />
    <link rel="up" title="Tips" href="index.html" />
    <link rel="next" title="Simple notifications in awesome" href="Simple_notifications_in_awesome.html" />
    <link rel="prev" title="Populating sup contacts from abook" href="Populating_sup_contacts_from_abook.html" />
    <link rel="alternate" type="application/atom+xml" title="Updated items" href="/updates.atom" />
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img class="logo" src="../../_static/logo.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../../index.html">JNRowe</a></div>
        <div class="rel">
          <a href="Populating_sup_contacts_from_abook.html" title="Populating sup contacts from abook"
             accesskey="P">previous</a> |
          <a href="Simple_notifications_in_awesome.html" title="Simple notifications in awesome"
             accesskey="N">next</a> |
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
    <div class="admonition note">
        <p class="first admonition-title">
            Estimated reading time: 4 minutes
        </p>
    </div>
    
    
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sharing-xresources-between-systems">
<h1>Sharing Xresources between systems<a class="headerlink" href="#sharing-xresources-between-systems" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2009-10-05</td>
</tr>
</tbody>
</table>
<p>In amongst the rants in our watercooler channel at work comes this question:</p>
<blockquote>
<div>So then, how do custom settings in <tt class="docutils literal"><span class="pre">Xresources</span></tt> work if you share your
home directory between machines?</div></blockquote>
<p>The question arises from a much larger topic concerning keeping your home
directory in a <a class="reference external" href="http://www.git-scm.com/">git</a> repository.  The issue Carl is having is that he needs to
use different options on different machines and doesn&#8217;t relish the idea of
having to pull and rebase branches just to keep files in sync.  Of course, he
doesn&#8217;t have to do that and that is the point of this tip.</p>
<div class="section" id="basic-conditionals">
<h2>Basic conditionals<a class="headerlink" href="#basic-conditionals" title="Permalink to this headline">¶</a></h2>
<p>With great foresight the authors of <a class="reference external" href="http://www.xfree86.org/current/xrdb.1.html">xrdb</a> decided that our <tt class="docutils literal"><span class="pre">Xresources</span></tt> file
should be preprocessed before it is used, the default preprocessor is <tt class="docutils literal"><span class="pre">cpp</span></tt>.
On most of our systems at work, and likely most Linux systems in general,
<tt class="docutils literal"><span class="pre">cpp</span></tt> is <a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc-4.4.1/cpp/">GNU cpp</a>.  Don&#8217;t worry about the size of the manual though, the
interesting features are easy to understand and use.  Let&#8217;s look at trimmed
example from my configuration file:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#ifndef FIXED_FONT</span>
    <span class="cp">#define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef BOLD_FIXED_FONT</span>
    <span class="cp">#define BOLD_FIXED_FONT FIXED_FONT:bold</span>
<span class="cp">#endif</span>

<span class="n">urxvt</span><span class="p">.</span><span class="n">font</span><span class="o">:</span> <span class="n">FIXED_FONT</span>
<span class="n">urxvt</span><span class="p">.</span><span class="n">boldFont</span><span class="o">:</span> <span class="n">BOLD_FIXED_FONT</span>

<span class="n">irssi</span><span class="p">.</span><span class="n">font</span><span class="o">:</span> <span class="n">FIXED_FONT</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202712">Fork this code</a></p>
<p>This small snippet sets a couple of default fonts that we can reference
throughout our resource file as <tt class="docutils literal"><span class="pre">FIXED_FONT</span></tt> and <tt class="docutils literal"><span class="pre">BOLD_FIXED_FONT</span></tt>.  This
way we can easily change the value in one place and it trickles down to all our
programs.  Or we can define different options at runtime by specifying values to
<tt class="docutils literal"><span class="pre">xrdb</span></tt>, such as <tt class="docutils literal"><span class="pre">xrdb</span> <span class="pre">-DFIXED_FONT=xft:Monospace:pixelsize=10</span></tt>.  And don&#8217;t
worry, <tt class="docutils literal"><span class="pre">cpp</span></tt> is smart enough to cope with the use <tt class="docutils literal"><span class="pre">=</span></tt> in our definition.</p>
</div>
<div class="section" id="per-system-conditionals">
<h2>Per system conditionals<a class="headerlink" href="#per-system-conditionals" title="Permalink to this headline">¶</a></h2>
<p>On one system I use <a class="reference external" href="http://www.levien.com/type/myfonts/inconsolata.html">Inconsolata</a> is not installed, so the configuration above
wouldn&#8217;t work on it.  <tt class="docutils literal"><span class="pre">xrdb</span></tt> gives us a way around the problem though, it
defines a set of symbols we can use including one to test the system&#8217;s
<tt class="docutils literal"><span class="pre">hostname</span></tt>.  <tt class="docutils literal"><span class="pre">nebula</span></tt>, the system that doesn&#8217;t have Inconsolata, does have
<a class="reference external" href="http://www.is-vn.bg/hamster/">terminus</a> and I can use that on there with a couple of small changes.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#ifndef FIXED_FONT</span>
    <span class="cp">#ifdef SRVR_nebula</span>
        <span class="cp">#define FIXED_FONT xft:Terminus:pixelsize=14:antialias=false</span>
    <span class="cp">#else</span>
        <span class="cp">#define FIXED_FONT xft:Inconsolata:pixelsize=14:antialias=false</span>
    <span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202713">Fork this code</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As we&#8217;re using <a class="reference external" href="http://xorg.freedesktop.org/">X11</a>&#8216;s <tt class="docutils literal"><span class="pre">xrdb</span></tt> it is network aware, it defines <tt class="docutils literal"><span class="pre">SVR_$name</span></tt>
for the <tt class="docutils literal"><span class="pre">X</span></tt> server name and <tt class="docutils literal"><span class="pre">CLNT_$name</span></tt> for the client name.  Using
these it is easy to configure systems where the server and clients are on
different machines.</p>
</div>
</div>
<div class="section" id="conditionals-for-server-options">
<h2>Conditionals for server options<a class="headerlink" href="#conditionals-for-server-options" title="Permalink to this headline">¶</a></h2>
<p>You can also change configured settings based on the extensions loaded in to the
server, for example to disable the screensaver in <tt class="docutils literal"><span class="pre">muxi</span></tt> if the DPMS extension
is supported we&#8217;d test for <tt class="docutils literal"><span class="pre">EXT_DPMS</span></tt>:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#ifdef EXT_DPMS</span>
    <span class="n">muxi</span><span class="p">.</span><span class="n">screensaver</span><span class="o">:</span> <span class="nb">false</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/202714">Fork this code</a></p>
</div>
<div class="section" id="testing-your-resource-files">
<h2>Testing your resource files<a class="headerlink" href="#testing-your-resource-files" title="Permalink to this headline">¶</a></h2>
<p>When you&#8217;re testing your own <tt class="docutils literal"><span class="pre">~/.Xresources</span></tt> file you can use the <tt class="docutils literal"><span class="pre">-n</span></tt>
option with <tt class="docutils literal"><span class="pre">xrdb</span></tt>, it tells <tt class="docutils literal"><span class="pre">xrdb</span></tt> to dump the settings as they would be
used instead of updating the resource database.  This makes it easy to check if
our conditional statements are working correctly without having to open and
close applications constantly.  You can also define and cancel symbol
definitions with the <tt class="docutils literal"><span class="pre">-D</span></tt> and <tt class="docutils literal"><span class="pre">-U</span></tt> options for <tt class="docutils literal"><span class="pre">xrdb</span></tt>, this allows you to
test your modifications that rely on symbols that are normally exported by
<tt class="docutils literal"><span class="pre">xrdb</span></tt>.</p>
</div>
<div class="section" id="using-a-more-featureful-preprocessor">
<h2>Using a more featureful preprocessor<a class="headerlink" href="#using-a-more-featureful-preprocessor" title="Permalink to this headline">¶</a></h2>
<p>You can also choose a different preprocessor if <tt class="docutils literal"><span class="pre">cpp</span></tt> isn&#8217;t up to your needs
by specifying a <tt class="docutils literal"><span class="pre">-cpp</span></tt> option to <tt class="docutils literal"><span class="pre">xrdb</span></tt>.  The only caveat is that must
accept <tt class="docutils literal"><span class="pre">-D</span></tt> for defines, <tt class="docutils literal"><span class="pre">-U</span></tt> for symbol cancelling and <tt class="docutils literal"><span class="pre">-I</span></tt> for include
paths.  An example that does fit these restrictions is <a class="reference external" href="http://www.gnu.org/software/m4/m4.html">m4</a>, and it might be
a good choice if you wish to do mode advanced things in your configuration file
such as fancy filtering or the use of loops for defining settings.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="Populating_sup_contacts_from_abook.html" title="Populating sup contacts from abook"
             >previous</a> |
          <a href="Simple_notifications_in_awesome.html" title="Simple notifications in awesome"
             >next</a> |
          <a href="../../genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="../../_sources/articles/tips/Sharing_Xresources_between_systems.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; <a href="../../copyright.html">Copyright</a> 2009-2013, James Rowe.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>