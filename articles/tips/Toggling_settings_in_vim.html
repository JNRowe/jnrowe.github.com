<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Toggling settings in vim &mdash; JNRowe</title>
    
    <link rel="stylesheet" href="../../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="JNRowe" href="../../index.html" />
    <link rel="up" title="Tips" href="index.html" />
    <link rel="next" title="Uber pink prompts" href="Uber_pink_prompts.html" />
    <link rel="prev" title="Three mobile broadband in Linux" href="Three_mobile_broadband_in_linux.html" />
    <link rel="alternate" type="application/atom+xml" title="Updated items" href="/updates.atom" />
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img class="logo" src="../../_static/logo.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../../index.html">JNRowe</a></div>
        <div class="rel">
          <a href="Three_mobile_broadband_in_linux.html" title="Three mobile broadband in Linux"
             accesskey="P">previous</a> |
          <a href="Uber_pink_prompts.html" title="Uber pink prompts"
             accesskey="N">next</a> |
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
    <div class="admonition note">
        <p class="first admonition-title">
            Estimated reading time: 2 minutes
        </p>
    </div>
    
    
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="toggling-settings-in-vim">
<h1>Toggling settings in vim<a class="headerlink" href="#toggling-settings-in-vim" title="Permalink to this headline">Â¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2009-10-02</td>
</tr>
</tbody>
</table>
<p>As you can never have enough keybinding tips and <a class="reference external" href="http://www.vim.org">vim</a> helps to prove that, the
tip for today answers Joshua&#8217;s question from <tt class="docutils literal"><span class="pre">##purplism</span></tt></p>
<blockquote>
<div>can you toggle settings in vim with a key?</div></blockquote>
<p>The simple answer is yes, but how easy it is depends on what you&#8217;re trying to
toggle.  We need a state to test when toggling settings, so as long as we can
query the setting toggling it is easy.  For example, I have a binding in my
<tt class="docutils literal"><span class="pre">~/.vimrc</span></tt> to toggle the value of <a class="reference external" href="http://vimdoc.sourceforge.net/htmldoc/options.html#'background'">background</a>.  As I use transparent terminals
the colours used for syntax highlighting can occasionally get a little difficult
to read depending on the wallpaper I&#8217;m using, the following function allows me
to quick toggle the <tt class="docutils literal"><span class="pre">background</span></tt> setting:</p>
<div class="highlight-vim"><div class="highlight"><pre><span class="c">&quot; Map Shift-F12 to switch between light and dark</span>
<span class="k">function</span><span class="p">!</span> Switch_background<span class="p">()</span>
    <span class="k">if</span> &amp;<span class="nb">background</span> <span class="p">==</span> <span class="s2">&quot;light&quot;</span>
        <span class="k">set</span> <span class="nb">background</span><span class="p">=</span><span class="nb">dark</span>
    <span class="k">else</span>
        <span class="k">set</span> <span class="nb">background</span><span class="p">=</span><span class="nb">light</span>
    <span class="k">endif</span>
<span class="k">endfunction</span>
map <span class="p">&lt;</span>S<span class="p">-</span>F12<span class="p">&gt;</span> :<span class="k">call</span> Switch_background<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/200255">Fork this code</a></p>
<p>For some other commands such as toggling line numbering it can be much simpler:</p>
<div class="highlight-vim"><div class="highlight"><pre>map <span class="p">&lt;</span>C<span class="p">-</span>F12<span class="p">&gt;</span> :<span class="k">set</span> <span class="k">number</span><span class="p">!&lt;</span>CR<span class="p">&gt;</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/200257">Fork this code</a></p>
<p>For those times when we can&#8217;t easily flip the setting on and off or query state
in a simple manner, the solution is to store state ourselves and test that.</p>
<p>We may, for example, wish to toggle a group of settings on or off at one time.
While we could test one of the settings in the toggle function it can become
quite brittle if we change those settings ourselves.  By storing our toggle
state in a variable we can test that instead.  The final &#8211; totally contrived &#8211;
example shows how to do that:</p>
<div class="highlight-vim"><div class="highlight"><pre><span class="c">&quot; Map Mod1-F12 to toggle some vim goodness</span>
<span class="k">function</span><span class="p">!</span> EditorvsNotepad<span class="p">()</span>
    <span class="k">if</span> <span class="k">g</span>:notepad <span class="p">==</span> <span class="s2">&quot;false&quot;</span>
        <span class="k">let</span> <span class="k">g</span>:notepad<span class="p">=</span><span class="s2">&quot;true&quot;</span>
        <span class="nb">syntax</span> off
        <span class="k">set</span> <span class="k">nohlsearch</span>
        <span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">0</span>
    <span class="k">else</span>
        <span class="k">let</span> <span class="k">g</span>:notepad<span class="p">=</span><span class="s2">&quot;false&quot;</span>
        <span class="nb">syntax</span> <span class="k">on</span>
        <span class="k">set</span> <span class="nb">hlsearch</span>
        <span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span>
    <span class="k">endif</span>
<span class="k">endfunction</span>
<span class="k">let</span> <span class="k">g</span>:notepad <span class="p">=</span> <span class="s2">&quot;true&quot;</span>
map <span class="p">&lt;</span>M<span class="p">-</span>F12<span class="p">&gt;</span> :<span class="k">call</span> EditorvsNotepad<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
</pre></div>
</div>
<p><a class="reference external" href="http://gist.github.com/200258">Fork this code</a></p>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Articles</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dopplr_effects.html">Dopplr defects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../important_balance.html">Murdering morality with ferocious fire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nice_stories.html">Tell me a nice story, please</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rcs.html">Introduction to RCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reset_in_ten.html">Hitting life&#8217;s reset button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../side_projects.html">Side-projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tdd_distros.html">TDD distro development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the_returned.html">Return to rambling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="Three_mobile_broadband_in_linux.html" title="Three mobile broadband in Linux"
             >previous</a> |
          <a href="Uber_pink_prompts.html" title="Uber pink prompts"
             >next</a> |
          <a href="../../genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="../../_sources/articles/tips/Toggling_settings_in_vim.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; <a href="../../copyright.html">Copyright</a> 2009-2014, James Rowe.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>