

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple notifications in awesome &mdash; JNRowe</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
        <link rel="copyright" title="Copyright" href="../../copyright.html"/>
    <link rel="top" title="JNRowe" href="../../index.html"/>
        <link rel="up" title="Tips" href="index.html"/>
        <link rel="next" title="Theming mutt" href="Theming_mutt.html"/>
        <link rel="prev" title="Sharing Xresources between systems" href="Sharing_Xresources_between_systems.html"/>
    <link rel="alternate" type="application/atom+xml" title="Updated items" href="/updates.atom" />

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> JNRowe
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Articles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo.html">Dropping Gentoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo_reflex.html">Dropping Gentoo reflex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fossil.html"><strong class="command">fossil</strong> experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mutt_config_snippets.html"><strong class="command">mutt</strong> configuration snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rcs.html">Introduction to <abbr title="GNU Revision Control System">RCS</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tdd_distros.html"><abbr title="Test Driven Development">TDD</abbr> distro development</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#further-categories">Further categories</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Tips</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="BTS_as_a_task_manager.html"><abbr title="Bug Tracking System">BTS</abbr> as a task manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="Beyond_tab_completion.html">Beyond simple tab completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="Bugzilla_real_names.html">Bugzilla mail with real names</a></li>
<li class="toctree-l4"><a class="reference internal" href="Compiling_in_vim.html">Compiling C source in vim</a></li>
<li class="toctree-l4"><a class="reference internal" href="Context_aware_diffs_with_git.html">Context aware diffs with git</a></li>
<li class="toctree-l4"><a class="reference internal" href="Custom_locations_in_the_GTK_filechooser.html">Custom keybindings in the GTK+ file dialogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="Debugging_python_regexps.html">Debugging Python <abbr title="Regular Expression">RegEx</abbr></a></li>
<li class="toctree-l4"><a class="reference internal" href="Disabling_cursor_blinking_in_GTK.html">Disabling cursor blinking in GTK+</a></li>
<li class="toctree-l4"><a class="reference internal" href="Fancy_awesome_theming.html">Fancy awesome theming</a></li>
<li class="toctree-l4"><a class="reference internal" href="Finding_a_windows_owner.html">Finding a window’s owner</a></li>
<li class="toctree-l4"><a class="reference internal" href="Formatting_csv_files_in_the_shell.html">Formatting <abbr title="Comma Separated Values">CSV</abbr> files in the shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="Gentoo_one_liners.html">Gentoo one liners</a></li>
<li class="toctree-l4"><a class="reference internal" href="Importing_gmail_filters_in_mutt.html">Importing gmail filters in mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="Instant_web_server.html">Instant web server</a></li>
<li class="toctree-l4"><a class="reference internal" href="Kick_me_birthday_reminders.html">“Kick me” birthday reminders</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html">Making a nice home</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#permissions">Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#vim-hacks">vim hacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="Making_a_nice_home.html#documentation">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Populating_sup_contacts_from_abook.html">Populating <strong class="command">sup</strong> contacts from abook</a></li>
<li class="toctree-l4"><a class="reference internal" href="Sharing_Xresources_between_systems.html">Sharing Xresources between systems</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Simple notifications in awesome</a></li>
<li class="toctree-l4"><a class="reference internal" href="#window-creation-notifications">Window creation notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-notifications">Network notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="Theming_mutt.html">Theming mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="Three_mobile_broadband_in_linux.html">Three mobile broadband in Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="Toggling_settings_in_vim.html">Toggling settings in vim</a></li>
<li class="toctree-l4"><a class="reference internal" href="Uber_pink_prompts.html">Uber pink prompts</a></li>
<li class="toctree-l4"><a class="reference internal" href="Visual_vim_mode_identifier.html">Visual vim mode identifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="Zsh_and_the_vcs.html">Zsh and the <abbr title="Version Control System">VCS</abbr></a></li>
<li class="toctree-l4"><a class="reference internal" href="emacs_gtk_shortcuts.html">Proper keyboard shortcuts in GTK+</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../probits/index.html">Project postmortems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../thoughts/index.html">Thoughts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">JNRowe</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Articles</a> &raquo;</li>
        
          <li><a href="index.html">Tips</a> &raquo;</li>
        
      <li>Simple notifications in awesome</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simple-notifications-in-awesome">
<h1>Simple notifications in awesome<a class="headerlink" href="#simple-notifications-in-awesome" title="Permalink to this headline">¶</a></h1>
<p>On seeing my window notifications in <a class="reference external" href="http://awesome.naquadah.org/">awesome</a> from a screencast for a new
project at work Matt Cooper asks:</p>
<blockquote>
<div><p>Is there a library that does those fancy notifications or do you have to
hack it up yourself?</p>
</div></blockquote>
<img alt="notifications in awesome" class="align-right" src="../../_images/2009-10-04-awesome_notifications.png" />
<p>There is a library to make notification popups in <strong class="command">awesome</strong>, and it is
called <a class="reference external" href="http://awesome.naquadah.org/doc/api/modules/naughty.html">naughty</a>.  With it notifications are as simple as calling
<code class="docutils literal"><span class="pre">naughty.notify</span></code>, for example:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I use <a class="reference external" href="https://github.com/leafo/moonscript/">moonscript</a> for all my <a class="reference external" href="http://www.lua.org/">lua</a> needs, as it provides a nicer syntax and
fixes some of the warts(such as global-by-default).  The examples below are
all written in <code class="docutils literal"><span class="pre">moonscript</span></code>.</p>
</div>
<div class="highlight-moon"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s2">&quot;</span><span class="s">naughty</span><span class="s2">&quot;</span>

<span class="n">naughty</span><span class="o">.</span><span class="n">notify</span> <span class="nv">text:</span> <span class="s2">&quot;</span><span class="s">my little popup</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">position:</span> <span class="s2">&quot;</span><span class="s">bottom_left</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>I do however define a few functions in my configuration file to simplify the
normal notifications I use:</p>
<div class="highlight-moon"><div class="highlight"><pre><span></span><span class="c1">-- Generic info/warn/error notifications</span>
<span class="n">debug_messages</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">notify</span> <span class="o">=</span>
    <span class="c1">-- debug_notify: Display notification when debug_messages is true</span>
    <span class="nv">debug:</span> <span class="kt">(</span><span class="n">text</span><span class="kt">)</span> <span class="nf">-&gt;</span>
        <span class="k">if</span> <span class="n">debug_messages</span>
            <span class="n">naughty</span><span class="o">.</span><span class="n">notify</span> <span class="nv">text:</span> <span class="s2">&quot;</span><span class="s">&lt;span color=&#39;#ff00ff&#39;&gt;Debug&lt;/span&gt;: #{awful.util.escape text}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="nv">timeout:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">width:</span><span class="mi">350</span><span class="p">,</span>

    <span class="nv">_gnotify:</span> <span class="kt">(</span><span class="n">ntype</span><span class="p">,</span> <span class="n">text</span><span class="kt">)</span> <span class="nf">-&gt;</span>
        <span class="n">colour</span> <span class="o">=</span> <span class="k">switch</span> <span class="n">ntype</span>
            <span class="k">when</span> <span class="s2">&quot;</span><span class="s">info</span><span class="s2">&quot;</span>
                <span class="s2">&quot;</span><span class="s">#00ff00</span><span class="s2">&quot;</span>
            <span class="k">when</span> <span class="s2">&quot;</span><span class="s">warn</span><span class="s2">&quot;</span>
                <span class="s2">&quot;</span><span class="s">#ffff00</span><span class="s2">&quot;</span>
            <span class="k">when</span> <span class="s2">&quot;</span><span class="s">error</span><span class="s2">&quot;</span>
                <span class="s2">&quot;</span><span class="s">#ff0000</span><span class="s2">&quot;</span>
            <span class="k">else</span>
                <span class="n">beautiful</span><span class="o">.</span><span class="n">fg_normal</span>
        <span class="n">naughty</span><span class="o">.</span><span class="n">notify</span> <span class="nv">text:</span> <span class="s2">&quot;</span><span class="s">&lt;span color=&#39;#{colour}&#39;&gt;●&lt;/span&gt; #{awful.util.escape text}</span><span class="s2">&quot;</span><span class="p">,</span>

    <span class="nv">start:</span> <span class="kt">(</span><span class="n">text</span><span class="kt">)</span> <span class="nf">-&gt;</span>
        <span class="n">notify</span><span class="o">.</span><span class="n">_gnotify</span> <span class="s2">&quot;</span><span class="s">info</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
    <span class="nv">stop:</span> <span class="kt">(</span><span class="n">text</span><span class="kt">)</span> <span class="nf">-&gt;</span>
        <span class="n">notify</span><span class="o">.</span><span class="n">_gnotify</span> <span class="s2">&quot;</span><span class="s">error</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
    <span class="nv">warn:</span> <span class="kt">(</span><span class="n">text</span><span class="kt">)</span> <span class="nf">-&gt;</span>
        <span class="n">notify</span><span class="o">.</span><span class="n">_gnotify</span> <span class="s2">&quot;</span><span class="s">warn</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re willing to install <a class="reference external" href="http://github.com/samsarin/lua-functional">lua-functional</a>, the above code snippet can be
made much nicer by using its <code class="docutils literal"><span class="pre">partial</span></code> application support to define the
final functions.</p>
</div>
<p>This group of functions, all namespaced under <code class="docutils literal"><span class="pre">notify</span></code>, provide simple wrappers
for the everyday notifications I use.  <code class="docutils literal"><span class="pre">notify.debug</span></code> is a nice way to be able
to litter your configuration file with visible pointers as to what is going on,
set <code class="docutils literal"><span class="pre">debug_messages</span> <span class="pre">=</span> <span class="pre">true</span></code> in your <code class="docutils literal"><span class="pre">rc.moon</span></code> to enable all the debug
information and switch it back to <code class="docutils literal"><span class="pre">false</span></code> to stop it being displayed.</p>
<p>The <code class="docutils literal"><span class="pre">notify.{start,stop,warn}</span></code> functions prepend the text you pass it with
a coloured Unicode bullet.  awesome makes use of <a class="reference external" href="http://www.pango.org/">pango</a>
meaning you can easily use pretty much any character you wish, or more
specifically any character your font can display.  From time to time I’ve
experimented with using <code class="docutils literal"><span class="pre">✔</span></code> and <code class="docutils literal"><span class="pre">✘</span></code>, but most of the fonts I prefer to use
don’t display them correctly(if you’re seeing two boxes your fonts don’t
either).</p>
</div>
<div class="section" id="window-creation-notifications">
<h1>Window creation notifications<a class="headerlink" href="#window-creation-notifications" title="Permalink to this headline">¶</a></h1>
<p>One of the notifications I like to have is for when new windows are opened, this
way I don’t miss windows opening on tags I’m not currently viewing.</p>
<div class="highlight-moon"><div class="highlight"><pre><span></span><span class="n">awful</span><span class="o">.</span><span class="n">hooks</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">register</span> <span class="kt">(</span><span class="n">startup</span><span class="kt">)</span> <span class="nf">=&gt;</span>
    <span class="c1">-- Display the window’s name, or just Application if it isn’t set</span>
    <span class="n">notify</span><span class="o">.</span><span class="n">start</span> <span class="s2">&quot;</span><span class="s">#{@name or &#39;Application&#39;} started</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="network-notifications">
<h1>Network notifications<a class="headerlink" href="#network-notifications" title="Permalink to this headline">¶</a></h1>
<p>I also have the following <a class="reference external" href="http://awesome.naquadah.org/doc/api/modules/awful.hooks.html">awful</a> hook set to toggle my network monitor between
<code class="docutils literal"><span class="pre">lo</span></code> and <code class="docutils literal"><span class="pre">ppp0</span></code> depending on whether my remote network interface is up.
Having the little popups to show when the network has gone down or come up is
quite nice, and definitely more noticeable than just changing the text in the
<a class="reference external" href="http://awesome.naquadah.org/doc/api/modules/wibox.html">wibox</a>.  The code below changes the interface name in the <code class="docutils literal"><span class="pre">wibox</span></code>, and
switches the network graph widget to use the appropriate input too.</p>
<div class="highlight-moon"><div class="highlight"><pre><span></span><span class="n">netiface</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">lo</span><span class="s2">&quot;</span>
<span class="n">awful</span><span class="o">.</span><span class="n">hooks</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">register</span> <span class="mi">3</span><span class="p">,</span> <span class="nf">-&gt;</span>
    <span class="n">iface</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="k">if</span> <span class="n">netiface</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">lo</span><span class="s2">&quot;</span> <span class="k">and</span> <span class="nb">io.open</span> <span class="s2">&quot;</span><span class="s">/var/lock/LCK..ttyUSB0</span><span class="s2">&quot;</span>
        <span class="s2">&quot;</span><span class="s">ppp0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">up</span><span class="s2">&quot;</span>
    <span class="k">elseif</span> <span class="n">netiface</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">ppp0</span><span class="s2">&quot;</span> <span class="k">and</span> <span class="k">not</span> <span class="nb">io.open</span> <span class="s2">&quot;</span><span class="s">/var/lock/LCK..ttyUSB0</span><span class="s2">&quot;</span>
        <span class="s2">&quot;</span><span class="s">lo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">down</span><span class="s2">&quot;</span>

    <span class="n">nettext_widget</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s"> #{iface}:</span><span class="s2">&quot;</span>
    <span class="n">wicked</span><span class="o">.</span><span class="n">register</span> <span class="n">netbar_widget</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">net</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">${#{iface} up_b}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">upload</span><span class="s2">&quot;</span>
    <span class="n">wicked</span><span class="o">.</span><span class="n">register</span> <span class="n">netbar_widget</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">net</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">${#{iface} down_b}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="s">download</span><span class="s2">&quot;</span>
    <span class="n">notify</span><span class="o">.</span><span class="n">start</span> <span class="s2">&quot;</span><span class="s">PPP0 interface has come #{state}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Theming_mutt.html" class="btn btn-neutral float-right" title="Theming mutt" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Sharing_Xresources_between_systems.html" class="btn btn-neutral" title="Sharing Xresources between systems" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../../copyright.html">Copyright</a> 2009-2017  James Rowe.
      Last updated on &#39;2017-12-10 [98dd75d]&#39;.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>